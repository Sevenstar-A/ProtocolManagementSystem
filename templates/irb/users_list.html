{% extends 'staff/base.html' %} 
{% load static %} 
{% block style %} 
<link rel="stylesheet" type="text/css" href="{% static 'staff/vendors/css/tables/datatable/datatables.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'staff/vendors/css/tables/extensions/buttons.dataTables.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'staff/vendors/css/tables/datatable/buttons.bootstrap4.min.css' %}">
{% endblock %} 
{% block title %}Users List Table {% endblock %}
{% block breadcrumb %}
<li class="breadcrumb-item active"><a href="">User List</a></li> 
{% endblock %}

{% block content  %} 
 <!-- BEGIN: Content-->
 <div class="content-header row"></div>
			
			<div class="content-detached content-right col-md-12">
				<div class="content-body" style="margin-left:0px">
					<div class="content-overlay"> </div>
					
					<section class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-body">
									<div class="bug-list-search">
										<div class="bug-list-search-content">
											<div class="sidebar-toggle d-block d-lg-none"><i class="feather icon-menu font-large-1"></i></div>
											<form action="#">
												<div class="position-relative">
													<input type="search" id="search-users" class="form-control" placeholder="Search Users...">
													<div class="form-control-position">
														<i class="fa fa-search text-size-base text-muted la-rotate-270"></i>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</section>

					<section class="row all-contacts">
						<div class="col-12">
							<div class="card">
								<div class="card-head">
									<div class="card-header">
										<h4 class="card-title">All Users</h4>
										<div class="heading-elements mt-0">
											<button class="btn btn-primary btn-md" data-toggle="modal" data-target="#AddContactModal"><i class="d-md-none d-block feather icon-plus white"></i>
												<span class="d-md-block d-none">Add User</span>
											</button>

											<div class="modal fade" id="AddContactModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1"
											aria-hidden="true">
												<div class="modal-dialog" role="document">
													<div class="modal-content">
														<section class="contact-form">
															<form id="form-add-contact" class="contact-input">
																<div class="modal-header">
																	<h5 class="modal-title" id="exampleModalLabel1">Add New Contact</h5>
																	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	<fieldset class="form-group col-12">
																		<input type="text" id="contact-name" class="contact-name form-control" placeholder="Name">
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="text" id="contact-email" class="contact-email form-control" placeholder="Email">
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="text" id="contact-phone" class="contact-phone form-control" placeholder="Phone Number">
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="checkbox" id="favorite" class="contact-fav input-chk"> Favorite
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="file" class="form-control-file" id="user-image">
																	</fieldset>
																</div>
																<div class="modal-footer">
																	<fieldset class="form-group position-relative has-icon-left mb-0">
																		<button type="button" id="add-contact-item" class="btn btn-info add-contact-item" data-dismiss="modal"><i
																			class="fa fa-paper-plane-o d-block d-lg-none"></i> <span class="d-none d-lg-block">Add New</span></button>
																	</fieldset>
																</div>
															</form>
														</section>
													</div>
												</div>
											</div>

											<div class="modal fade" id="EditContactModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
											aria-hidden="true">
												<div class="modal-dialog" role="document">
													<div class="modal-content">
														<section class="contact-form">
															<form id="form-edit-contact" class="contact-input">
																<div class="modal-header">
																	<h5 class="modal-title" id="exampleModalLabel">Edit Contact</h5>
																	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	<fieldset class="form-group col-12">
																		<input type="text" id="name" class="name form-control" placeholder="Name">
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="text" id="email" class="email form-control" placeholder="Email">
																	</fieldset>
																	<fieldset class="form-group col-12">
																		<input type="text" id="phone" class="phone form-control" placeholder="Phone Number">
																	</fieldset>
																	<span id="fav" class="d-none"></span>
																</div>
																<div class="modal-footer">
																	<fieldset class="form-group position-relative has-icon-left mb-0">
																		<button type="button" id="edit-contact-item" class="btn btn-info edit-contact-item" data-dismiss="modal"><i
																			class="fa fa-paper-plane-o d-lg-none"></i> <span class="d-none d-lg-block">Edit</span></button>
																	</fieldset>
																</div>
															</form>
														</section>
													</div>
												</div>
											</div>

											<!-- <span class="dropdown">
												<button id="btnSearchDrop1" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" class="btn btn-warning dropdown-menu-right dropdown-toggle btn-md">
													<i class="feather icon-download-cloud white"></i></button>
												<span aria-labelledby="btnSearchDrop1" class="dropdown-menu dropdown-menu-right mt-1">
													<a href="#" class="dropdown-item"><i class="feather icon-upload"></i> Import</a>
													<a href="#" class="dropdown-item"><i class="feather icon-download"></i> Export</a>
													<a href="#" class="dropdown-item"><i class="feather icon-shuffle"></i> Find Duplicate</a>
												</span>
											</span> -->
											<button class="btn btn-default btn-sm"><i class="feather icon-settings white"></i></button>
										</div>
									</div>
								</div>
								<div class="card-content">
									<div class="card-body">
										<!-- Task List table -->
										<!-- <button type="button" class="btn btn-danger btn-sm delete-all mb-1">Delete All</button> -->
										<div class="table-responsive">
											<table id="users-contacts" class="table table-white-space table-bordered row-grouping display no-wrap icheck table-middle text-center">
												<thead>
													<tr>
														<th><input type="checkbox" class="input-chk" id="check-all" onclick="toggle();"></th>
														<th>Full Name</th>
														<th>Email</th>
														<th>Phone</th>
														<th>Role</th>
														<th>Actions</th>
													</tr>
												</thead>
												<tbody>
													
													{% for u in users %}
												
													<tr style = "{% if not u.is_active %} color:red {% endif %} ">
														<td><input type="checkbox" class="input-chk check"></td>
														<td>
															<div class="media">
																<div class="media-left pr-1"><span class="avatar avatar-sm avatar-online rounded-circle">
																	{% if u.profile_image %}
																	
																	<img src="{{u.profile_image.url}}" alt="">
																	{% else %} 
																	<img src="{% static 'customer/img/user.png' %}"alt="avatar">
																	{% endif %}
																	</span>
																</div>
																<div class="media-body media-middle">
																	<a class="media-heading name">{{u.full_name}}</a>
																</div>
															</div>
														</td>
														<td class="text-center">
															<a class="email" href="mailto:{{u.email}}">{{u.email}}</a>
														</td>
														<td class="phone">{% if u.phone_number %} {{u.phone_number}} {% else %} - {% endif %}</td>
														<td class="text-center">
															{% if u.is_staff and u.position %}
															<span>{{u.position}}</span>
															{% elif u.is_customer %}
															<span>Client</span>
															{% else %} 
															<span>Superuser</span>
															{% endif %}
														</td>
														<td>
															<a data-toggle="modal" data-target="#EditContactModal" class="primary edit mr-1"><i class="fa fa-pencil"></i></a>
															<!-- <a class="danger delete mr-1"><i class="fa fa-trash-o"></i></a> -->
															<span class="dropdown">
																<a id="btnSearchDrop31" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" class="dropdown-toggle dropdown-menu-right"><i
																	class="fa fa-ellipsis-v"></i></a>
																<span aria-labelledby="btnSearchDrop31" class="dropdown-menu mt-1 dropdown-menu-right">
																	<a href="#" class="dropdown-item delete"><i class="fa fa-eye"></i>View Detail</a>
																	<!-- <a data-toggle="modal" data-target="#EditContactModal" class="dropdown-item edit"><i class="feather icon-edit-2"></i>
																		Edit</a> -->
																	<a href="#" class="dropdown-item delete"><i class="fa fa-trash"></i> Delete</a>
																	<a href="#" class="dropdown-item"><i class="fa fa-files-o"></i> Proposals</a>
																	{% if u.is_active %} 
																	<a href="{% url 'irb:activate_user' active='False' pk=u.id %}" class="dropdown-item"><i class="fa fa-times"></i> Suspend</a>
																	{% else %}
																	<a href="{% url 'irb:activate_user' active='True' pk=u.id %}" class="dropdown-item"><i class="fa fa-check primary"></i> Approve</a>
																	{% endif %}
																	
																</span>
															</span>
														</td>
													</tr>
													{% endfor %}
												</tbody>
												<tfoot>
													<tr>
														<th></th>
														<th>Name</th>
														<th>Email</th>
														<th>Phone</th>
														<th>Role</th>
														<th>Actions</th>
													</tr>
												</tfoot>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
			</div>

		
		
 <!-- END: Content-->

{% endblock %} 



{% block js %} 

<!-- vender js -->

<!-- end vender js -->

   <!-- BEGIN: Page JS-->
   <script src="{% static 'staff/js/scripts/tables/datatables-extensions/datatable-button/datatable-html5.min.js' %}"></script>
   <!-- END: Page JS-->

{% endblock %} 